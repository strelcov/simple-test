# Мини-инструкция
В папке с проектом:
0. В корне с проектом создайте папку с названием `.data` для волюма бд.
1. Выполните команду `make up` - поднимается докер-окружение (настраивал под mac из-под nfs, поэтому в корректности запуска других вариантов не уверен).
2. Добавьте домен `simple.test` в `hosts` (для macos 127.0.0.1, для linux соответствующий внешний ip nginx контейнера).   
3. Создайте файл `.env.local` на основе `.env`, если требуется.
4. Выполните команду `make deps_update` - установка зависимостей composer
5. Выполните команду `make create_database` - создание бд и схемы.
6. Выполните команду `make fixtures` - засеивание бд тестовыми данными (требует несколько минтут).
7. Выполните команду `make test` для запуска тестов

###### Примеры вызовов api-методов:
 

    ### Поиск книги по названию

    GET http://simple.test:8081/book/search
    Content-Type: application/json
    
    {"name": "авто"}


    ### Создание книги:
    - если передать существующие id авторов, то они прикрепятся к книге
    - если передать несуществующие id авторов, то получим ошибку
    - если передать name автора, то оно обновится у существующего автора, если передан его id или создастся новый автор с таким именем 

    POST http://simple.test:8081/book/create
    Content-Type: application/json
    
    {
        "name": "the book 1",
        "authors": [
            {
                "id": "1"
            },
            {
                "id": "2"
            }
        ]
    }


    ### Создание автора 

    POST http://simple.test:8081/author/create
    Content-Type: application/json
    
    {"name": "author name"}


    ### Информация о книге 

    GET http://simple.test:8081/ru/book/1
    GET http://simple.test:8081/en/book/1